$.fn.imageLoader=function(){$(this).one("load",function(){}).each(function(){this.complete&&$(this).load()})};var productGalleryObj={init:function(){var e=$(".productGallery").find(".bxslider.small");$.each(e,function(a,t){$(e[a]).bxSlider({infiniteLoop:!1,minSlides:3,maxSlides:3,slideMargin:5,moveSlides:1,pager:!1,speed:1e3,hideControlOnEnd:!0,slideWidth:80,responsive:!1,controls:!0,pagerCustom:"#bx-pager",onSliderLoad:function(){if(a===e.length-1){$(".productTabs").tabPlugIn(function(e){var a=$(".tabContent.videos"),t=a.find(".previewWrapper"),i=a.find(".thumbnailWrapper"),r=t.find("> iframe");if($(e).find("a").hasClass("tabPictures"))r.attr("src","");else if($(e).find("a").hasClass("tabVideos")){r.attr("src","");var o="http://www.youtube.com/embed/"+i.find(".bxslider li a.active").attr("href");r.attr("src",o)}})}}})}),this.buildPhoto(),this.buildVideo()},buildPhoto:function(){$(".photos .thumbnailWrapper .bxslider > li > a").each(function(){var e=$(this),a=$("<a></a>");a.attr({href:e.attr("href"),"data-lightbox":e.attr("data-group"),"data-title":e.attr("data-group-title")});var t=$("<img>");t.attr({src:e.attr("href"),alt:e.find("img").attr("alt")?e.find("img").attr("alt"):""}),t.appendTo(a);var i=$("<span></span>");i.addClass("viewLargerBtn"),i.appendTo(a),a.appendTo(".photos .previewWrapper"),0===e.parents(".bxslider li").index()?a.addClass("active"):a.removeClass("active")}),this.bindPhotoEvent()},bindPhotoEvent:function(){$(".photos .previewWrapper a.active img").imageLoader(),$(".photos .thumbnailWrapper .bxslider > li > a").on("click",function(e){e.preventDefault();var a=$(this);$(".photos .thumbnailWrapper .bxslider > li > a").removeClass("active"),a.addClass("active");var t=a.parents(".bxslider > li").index(),i=a.parents(".photos");$(i).find(".previewWrapper a").removeClass("active"),$(i).find(".previewWrapper a").eq(t).addClass("active"),$(".photos .previewWrapper a.active img").imageLoader()})},buildVideo:function(){var e;$(".productTabs a.tabVideos").parent("li").hasClass("active")&&(e=$(".videos .thumbnailWrapper .bxslider > li").eq(0).find("a").attr("href"));var a=$("<iframe></iframe>");a.attr({width:"100%",height:"360",frameborder:0,allowfullscreen:"allowfullscreen",src:e?"http://www.youtube.com/embed/"+e+"?wmode=opaque":"",type:"text/html"}),a.appendTo(".videos .previewWrapper"),this.bindVideoEvent()},bindVideoEvent:function(){$(".videos .thumbnailWrapper .bxslider > li > a").on("click",function(e){e.preventDefault();var a=$(this);$(".videos .thumbnailWrapper .bxslider > li > a").removeClass("active"),a.addClass("active"),$(".previewWrapper > iframe").attr("src","");var t="http://www.youtube.com/embed/"+a.attr("href");$(".previewWrapper > iframe").attr("src",t)})}};$(document).ready(function(e){productGalleryObj.init()});